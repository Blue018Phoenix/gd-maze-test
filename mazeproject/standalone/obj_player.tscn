[gd_scene load_steps=62 format=3 uid="uid://e6rtrqj5f5ak"]

[ext_resource type="Texture2D" uid="uid://b0d8wtew00ax1" path="res://mazeproject/standalone/spr_roaringfraud_intro.png" id="1_wmdtx"]
[ext_resource type="Texture2D" uid="uid://df6og1m1cbeil" path="res://mazeproject/standalone/spr_roaringfraud_flight.png" id="2_7ct8v"]
[ext_resource type="Texture2D" uid="uid://celxf87m2g7w8" path="res://mazeproject/standalone/spr_roaringfraud_slash.png" id="2_460u3"]
[ext_resource type="AudioStream" uid="uid://m58v02y7l2i1" path="res://mazeproject/standalone/fraudtrack.ogg" id="2_a21mn"]
[ext_resource type="Texture2D" uid="uid://brq2qt4si0gd8" path="res://mazeproject/standalone/spr_roaringfraud_mash.png" id="2_hcu3w"]
[ext_resource type="Texture2D" uid="uid://bqxpxgtushbva" path="res://mazeproject/standalone/spr_roaringfraud_startflight.png" id="3_jo78v"]
[ext_resource type="PackedScene" uid="uid://btm062cc7kdsk" path="res://mazeproject/standalone/obj_fakestartup.tscn" id="6_jo78v"]

[sub_resource type="GDScript" id="GDScript_vxkus"]
script/source = "extends CharacterBody2D

var aura = preload(\"res://mazeproject/standalone/obj_fx_afterimage.tscn\")

@export var movespeed = 550

var dvelocity : Vector2
var auradirection : Vector2 = Vector2(2,0)
var speedmultiplier = 1

func _ready() -> void:
	await $Camera2D/fakeroot/ObjFakestartup.get_node(\"anim\").animation_finished
	$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"default\")
	$AudioStreamPlayer.play()

func _input(event: InputEvent) -> void:
	if event.is_action_pressed(\"i_flight\") and speedmultiplier == 1:
		speedmultiplier = 0.9
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.offset.y = 20.0
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"flightstart\")
		await $fraudcontainment/SubViewport/Node2D/SprSizerefExternal.animation_finished
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.offset.y = 45.0
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"flight\")
		speedmultiplier = 2
	elif event.is_action_released(\"i_flight\") and speedmultiplier == 2:
		speedmultiplier = 0.9
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.offset.y = 20.0
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play_backwards(\"flightstart\")
		await $fraudcontainment/SubViewport/Node2D/SprSizerefExternal.animation_finished
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.offset.y = 0
		$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"idle\")
		speedmultiplier = 1
	elif event.is_action_pressed(\"i_special\") and speedmultiplier == 1:
		if $fraudcontainment/SubViewport/Node2D/SprSizerefExternal.animation == \"slash\":
			$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"mash\")
		else:
			$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"slash\")
			await $fraudcontainment/SubViewport/Node2D/SprSizerefExternal.animation_finished
			$fraudcontainment/SubViewport/Node2D/SprSizerefExternal.play(\"idle\")

func get_input():
	dvelocity = Input.get_vector(\"i_moveleft\", \"i_moveright\", \"i_moveup\", \"i_movedown\")
	set_velocity(dvelocity*(movespeed*speedmultiplier))
	if Input.is_action_pressed(\"i_moveleft\"):
		$fraudcontainment/SubViewport/Node2D.scale.x = 1
		auradirection = Vector2(2,0)
	if Input.is_action_pressed(\"i_moveright\"):
		$fraudcontainment/SubViewport/Node2D.scale.x = -1
		auradirection = Vector2(-2,0)

var halt = false

func afterimages():
	if !halt:
		halt = true
		var b = aura.instantiate()
		b.global_position = $fraudcontainment.global_position + Vector2(128,128)
		b.tex = ImageTexture.create_from_image($fraudcontainment/SubViewport.get_texture().get_image())
		b.scale = Vector2(0.5,0.5)
		b.direction = auradirection
		Main.CurrentWorld.add_child(b)
		await get_tree().create_timer(0.06).timeout
		halt = false

func _physics_process(_delta):
	get_input()
	move_and_slide()
	#self.position += velocity * movespeed
	afterimages()
"

[sub_resource type="AtlasTexture" id="AtlasTexture_a21mn"]
atlas = ExtResource("1_wmdtx")
region = Rect2(0, 0, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_460u3"]
atlas = ExtResource("1_wmdtx")
region = Rect2(268, 0, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_hcu3w"]
atlas = ExtResource("1_wmdtx")
region = Rect2(536, 0, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_hthcu"]
atlas = ExtResource("1_wmdtx")
region = Rect2(804, 0, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_7ct8v"]
atlas = ExtResource("1_wmdtx")
region = Rect2(1072, 0, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_jo78v"]
atlas = ExtResource("1_wmdtx")
region = Rect2(0, 272, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_ki0k0"]
atlas = ExtResource("1_wmdtx")
region = Rect2(268, 272, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_i73on"]
atlas = ExtResource("1_wmdtx")
region = Rect2(536, 272, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_du6wp"]
atlas = ExtResource("1_wmdtx")
region = Rect2(804, 272, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_xoreq"]
atlas = ExtResource("1_wmdtx")
region = Rect2(1072, 272, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_d6qa2"]
atlas = ExtResource("1_wmdtx")
region = Rect2(0, 544, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_e5a0o"]
atlas = ExtResource("1_wmdtx")
region = Rect2(268, 544, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_6setr"]
atlas = ExtResource("1_wmdtx")
region = Rect2(536, 544, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_25ypg"]
atlas = ExtResource("1_wmdtx")
region = Rect2(804, 544, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_s6pv4"]
atlas = ExtResource("1_wmdtx")
region = Rect2(1072, 544, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_hqpii"]
atlas = ExtResource("1_wmdtx")
region = Rect2(0, 816, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_5hurj"]
atlas = ExtResource("1_wmdtx")
region = Rect2(268, 816, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_ufntt"]
atlas = ExtResource("1_wmdtx")
region = Rect2(536, 816, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_o7oav"]
atlas = ExtResource("1_wmdtx")
region = Rect2(804, 816, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_7ienl"]
atlas = ExtResource("1_wmdtx")
region = Rect2(1072, 816, 268, 272)

[sub_resource type="AtlasTexture" id="AtlasTexture_nrpue"]
atlas = ExtResource("2_7ct8v")
region = Rect2(0, 0, 192, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_3340h"]
atlas = ExtResource("2_7ct8v")
region = Rect2(192, 0, 192, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_wvxej"]
atlas = ExtResource("2_7ct8v")
region = Rect2(384, 0, 192, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_x7uiu"]
atlas = ExtResource("2_7ct8v")
region = Rect2(576, 0, 192, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_2bvyl"]
atlas = ExtResource("3_jo78v")
region = Rect2(0, 0, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_d6u68"]
atlas = ExtResource("3_jo78v")
region = Rect2(200, 0, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_avl72"]
atlas = ExtResource("3_jo78v")
region = Rect2(400, 0, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_b4d8v"]
atlas = ExtResource("3_jo78v")
region = Rect2(600, 0, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_4fq3m"]
atlas = ExtResource("3_jo78v")
region = Rect2(800, 0, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_pvd3d"]
atlas = ExtResource("3_jo78v")
region = Rect2(0, 160, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_ku132"]
atlas = ExtResource("3_jo78v")
region = Rect2(200, 160, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_a1vq3"]
atlas = ExtResource("3_jo78v")
region = Rect2(400, 160, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_4rh15"]
atlas = ExtResource("3_jo78v")
region = Rect2(600, 160, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_sl6kd"]
atlas = ExtResource("3_jo78v")
region = Rect2(800, 160, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_xlukw"]
atlas = ExtResource("3_jo78v")
region = Rect2(0, 320, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_85rk0"]
atlas = ExtResource("3_jo78v")
region = Rect2(200, 320, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_4thfw"]
atlas = ExtResource("3_jo78v")
region = Rect2(400, 320, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_0ki75"]
atlas = ExtResource("3_jo78v")
region = Rect2(600, 320, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_wcwux"]
atlas = ExtResource("3_jo78v")
region = Rect2(800, 320, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_5u71t"]
atlas = ExtResource("3_jo78v")
region = Rect2(0, 480, 200, 160)

[sub_resource type="AtlasTexture" id="AtlasTexture_ja7b8"]
atlas = ExtResource("2_hcu3w")
region = Rect2(0, 0, 226, 156)

[sub_resource type="AtlasTexture" id="AtlasTexture_3ab4b"]
atlas = ExtResource("2_hcu3w")
region = Rect2(226, 0, 226, 156)

[sub_resource type="AtlasTexture" id="AtlasTexture_11h6c"]
atlas = ExtResource("2_hcu3w")
region = Rect2(452, 0, 226, 156)

[sub_resource type="AtlasTexture" id="AtlasTexture_mn302"]
atlas = ExtResource("2_460u3")
region = Rect2(0, 0, 234, 230)

[sub_resource type="AtlasTexture" id="AtlasTexture_7cen8"]
atlas = ExtResource("2_460u3")
region = Rect2(234, 0, 234, 230)

[sub_resource type="AtlasTexture" id="AtlasTexture_xtv0w"]
atlas = ExtResource("2_460u3")
region = Rect2(468, 0, 234, 230)

[sub_resource type="AtlasTexture" id="AtlasTexture_tlhth"]
atlas = ExtResource("2_460u3")
region = Rect2(702, 0, 234, 230)

[sub_resource type="AtlasTexture" id="AtlasTexture_wbgu4"]
atlas = ExtResource("2_460u3")
region = Rect2(936, 0, 234, 230)

[sub_resource type="SpriteFrames" id="SpriteFrames_mn302"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_a21mn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_460u3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hcu3w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hthcu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ct8v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jo78v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ki0k0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i73on")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_du6wp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xoreq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d6qa2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e5a0o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6setr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_25ypg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s6pv4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hqpii")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5hurj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ufntt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o7oav")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ienl")
}],
"loop": false,
"name": &"default",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nrpue")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3340h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wvxej")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x7uiu")
}],
"loop": true,
"name": &"flight",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2bvyl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d6u68")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_avl72")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b4d8v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4fq3m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pvd3d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ku132")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a1vq3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4rh15")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sl6kd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xlukw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_85rk0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4thfw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0ki75")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wcwux")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5u71t")
}],
"loop": false,
"name": &"flightstart",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ienl")
}],
"loop": true,
"name": &"idle",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ja7b8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3ab4b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_11h6c")
}],
"loop": true,
"name": &"mash",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mn302")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7cen8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xtv0w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tlhth")
}, {
"duration": 4.0,
"texture": SubResource("AtlasTexture_wbgu4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ienl")
}],
"loop": false,
"name": &"slash",
"speed": 12.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_cbaxd"]
radius = 40.792156

[sub_resource type="Animation" id="Animation_wmdtx"]
resource_name = "default"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("fraudcontainment:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-136, -128), Vector2(-136, -120.03)]
}

[sub_resource type="Animation" id="Animation_a21mn"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("fraudcontainment:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-136, -128)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_460u3"]
_data = {
&"RESET": SubResource("Animation_a21mn"),
&"default": SubResource("Animation_wmdtx")
}

[node name="ObjPlayer" type="CharacterBody2D"]
z_index = 10
collision_layer = 3
collision_mask = 3
script = SubResource("GDScript_vxkus")

[node name="fraudcontainment" type="SubViewportContainer" parent="."]
offset_left = -136.0
offset_top = -128.0
offset_right = 376.0
offset_bottom = 384.0
scale = Vector2(0.5, 0.5)
stretch = true

[node name="SubViewport" type="SubViewport" parent="fraudcontainment"]
transparent_bg = true
handle_input_locally = false
oversampling = false
size_2d_override = Vector2i(512, 512)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="Node2D" type="Node2D" parent="fraudcontainment/SubViewport"]
position = Vector2(256, 256)

[node name="SprSizerefExternal" type="AnimatedSprite2D" parent="fraudcontainment/SubViewport/Node2D"]
texture_filter = 1
position = Vector2(48, -32)
scale = Vector2(1.5, 1.5)
sprite_frames = SubResource("SpriteFrames_mn302")
autoplay = "default"

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(1.5, 1.5)

[node name="fakeroot" type="Node2D" parent="Camera2D"]
position = Vector2(-480, -270)

[node name="ObjFakestartup" parent="Camera2D/fakeroot" instance=ExtResource("6_jo78v")]
z_index = 100
scale = Vector2(0.75, 0.75)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_cbaxd")
debug_color = Color(1, 0, 0, 0.41960785)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_460u3")
}
autoplay = "default"

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("2_a21mn")
